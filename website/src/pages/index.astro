---
import SocialIcons from '../components/SocialIcons.astro';
import ThemeProvider from '../components/ThemeProvider.astro';
import TerminalContent from '../components/TerminalContent.astro';
---

<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>SlateDB | Embedded DB Built on Object Storage</title>
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="description" content="An Embedded DB Built on Object Storage" />
		<meta property="og:image" content="/img/slatedb-opengraph.jpg" />
		<meta property="og:image:alt" content="SlateDB | Embedded DB Built on Object Storage" />
	</head>
	<body>
		<ThemeProvider />
		<div class="page">
			<header class="header">
				<div class="header-content">
					<div class="title-wrapper">
						<a href="/" class="site-title">
							<img src="/img/logo-full.svg" alt="SlateDB" />
						</a>
					</div>
					<div class="right-group">
						<div class="header-links">
							<a href="/docs/get-started/introduction/" class="header-link">docs</a>
							<a href="https://discord.gg/mHYmGy5MgA" target="_blank" rel="noopener noreferrer" class="header-link">discord</a>
							<a href="https://github.com/slatedb/slatedb" target="_blank" rel="noopener noreferrer" class="header-link" id="github-link">github</a>
						</div>
					</div>
				</div>
			</header>
			<main class="main">
                <h1>
                    slatedb is an embedded key-value database built on object storage
                </h1>

                <div class="terminal">
                    <div class="terminal-header">
                        <div class="terminal-buttons">
                            <span class="terminal-button terminal-button-close"></span>
                            <span class="terminal-button terminal-button-minimize"></span>
                            <span class="terminal-button terminal-button-maximize"></span>
                        </div>
                        <div class="terminal-tabs">
                            <button class="terminal-tab active" data-tab="rust">rust</button>
                            <button class="terminal-tab" data-tab="golang">golang</button>
                            <button class="terminal-tab" data-tab="python">python</button>
                        </div>
                    </div>
                    <div class="terminal-body">
                        <TerminalContent
                            language="rust"
                            command="cargo add slatedb"
                            docsUrl="/docs/get-started/introduction/"
                            isDefault={true}
                        />
                        <TerminalContent
                            language="golang"
                            command="go get slatedb.io/slatedb-go"
                            docsUrl="/docs/get-started/introduction/"
                        />
                        <TerminalContent
                            language="python"
                            command="pip install slatedb"
                            docsUrl="/docs/get-started/introduction/"
                        />
                    </div>
                </div>
                <div class="bordered-section">
                    <div class="section-title">used by</div>
                    <div class="logos-section">
                        <a href="https://www.tensorlake.ai/" target="_blank" rel="noopener noreferrer">
                            <img src="/img/logos/tensorlake.svg" alt="TensorLake" />
                        </a>
                        <a href="https://responsive.dev/" target="_blank" rel="noopener noreferrer">
                            <img src="/img/logos/responsive.svg" alt="Responsive" />
                        </a>
                        <a href="https://www.embucket.com/" target="_blank" rel="noopener noreferrer">
                            <img src="/img/logos/embucket.svg" alt="Embucket" />
                        </a>
                        <a href="https://merklemap.com/" target="_blank" rel="noopener noreferrer">
                            <img src="/img/logos/merklemap.svg" alt="MerkleMap" />
                        </a>
                    </div>
                </div>

			</main>
			<footer class="footer">
				<div class="footer-content">
					<div class="footer-icons">
						<SocialIcons />
					</div>
					<div class="copyright-wrapper">
						Copyright © 2025 SlateDB Authors. All rights reserved.
					</div>
				</div>
			</footer>
		</div>
	</body>
</html>

<style>
	html,
	body {
		font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
		margin: 0;
		padding: 0;
		height: 100%;
	}

	html {
		height: 100%;
	}

	body {
		min-height: 100vh;
	}

	.sr-only {
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		clip-path: inset(50%);
		white-space: nowrap;
		border-width: 0;
	}

	.page {
		display: flex;
		flex-direction: column;
		min-height: 100vh;
	}

	.header {
		z-index: 100;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		max-width: 100%;
		padding: 1rem 1.5rem;
		background-color: white;
		box-sizing: border-box;
		overflow: hidden;
	}

	.header-content {
		display: flex;
		gap: 1rem;
		justify-content: space-between;
		align-items: center;
		height: 100%;
		width: 100%;
		max-width: 100%;
		box-sizing: border-box;
	}

	.title-wrapper {
		overflow: clip;
		padding: 0.25rem;
		margin: -0.25rem;
		min-width: 0;
		flex-shrink: 1;
	}

	.site-title {
		display: inline-flex;
		align-items: center;
		text-decoration: none;
	}

	.site-title img {
		height: calc((4rem - 2rem) * 0.8);
		width: auto;
		max-width: 100%;
	}

	.right-group {
		display: flex;
		align-items: center;
		flex-shrink: 0;
		margin-left: auto;
	}

	.header-links {
		display: flex;
		gap: 1.5rem;
		align-items: center;
	}

	.header-link {
		font-size: 0.875rem;
		font-family: monospace;
		color: #000;
		text-decoration: none;
		transition: color 0.2s ease;
	}

	.header-link:hover {
		color: #666;
	}

	.header-link .star-count {
		display: inline-block;
		color: #666 !important;
		font-weight: normal;
		margin-left: 0.25rem;
		transition: none !important;
	}

	.header-link:hover .star-count {
		color: #666 !important;
	}

	#github-link .star-count {
		color: #666 !important;
	}

	.main {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		padding-top: 8rem;
		padding-bottom: 4rem;
		max-width: 80%;
		margin: 0 auto;
		box-sizing: border-box;
		gap: 1.5rem;
        min-height: 50rem;
	}

	.main h1 {
        font-family: monospace;
		font-size: 1.5rem;
		margin: 0;
        max-width: 600px;
	}

	.bordered-section {
		width: 100%;
		max-width: 600px;
		display: flex;
		flex-direction: column;
		border: 1px solid #666;
		position: relative;
		padding: 1rem;
	}

	.section-title {
		font-family: monospace;
		font-size: 0.75rem;
		color: #666;
		position: absolute;
		top: -0.5rem;
		left: 1rem;
		background-color: white;
		padding: 0 0.1rem;
		white-space: nowrap;
	}

	.logos-section {
		display: grid;
		grid-template-columns: repeat(4, 1fr);
		align-items: center;
		gap: 1rem;
		width: 100%;
	}

	.logos-section a {
		display: flex;
		align-items: center;
		justify-content: center;
		text-decoration: none;
	}

	@media (max-width: 768px) {
		.logos-section {
			grid-template-columns: repeat(2, 1fr);
		}
	}

	.logos-section img {
		height: 2.5rem;
		width: auto;
		max-width: 120px;
		object-fit: contain;
		opacity: 0.6;
		transition: opacity 0.2s ease;
		filter: grayscale(100%);
	}

	.logos-section a:hover img {
		opacity: 1;
	}

	.terminal {
		width: 100%;
		max-width: 600px;
		background-color: #1e1e1e;
		border-radius: 8px;
		overflow: hidden;
		box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
        margin-top: 1rem;
        margin-bottom: 1rem;
	}

	.terminal-header {
		background-color: #2d2d2d;
		padding: 0.5rem 1rem;
		display: flex;
		align-items: center;
		gap: 0.75rem;
		border-bottom: 1px solid #3d3d3d;
	}

	.terminal-buttons {
		display: flex;
		gap: 0.5rem;
	}

	.terminal-button {
		width: 12px;
		height: 12px;
		border-radius: 50%;
		display: inline-block;
	}

	.terminal-button-close {
		background-color: #ff5f57;
	}

	.terminal-button-minimize {
		background-color: #ffbd2e;
	}

	.terminal-button-maximize {
		background-color: #28ca42;
	}

	.terminal-tabs {
		display: flex;
		gap: 0.25rem;
		margin-left: 1rem;
	}

	@media (max-width: 768px) {
		.terminal-header {
			flex-direction: column;
			align-items: flex-start;
			gap: 1.5rem;
			padding: 0.75rem 1rem;
		}

		.terminal-tabs {
			margin-left: 0;
			width: 100%;
			justify-content: flex-start;
		}
	}

	.terminal-tab {
		background: none;
		border: none;
		border-bottom: 2px solid transparent;
		color: #666;
		font-size: 0.875rem;
		font-family: monospace;
		cursor: pointer;
		padding: 0.5rem 0.75rem;
		border-radius: 4px 4px 0 0;
		transition: all 0.2s ease;
		position: relative;
	}

	.terminal-tab:hover {
		background-color: #2d2d2d;
		color: #d4d4d4;
		border-bottom-color: #555;
	}

	.terminal-tab.active {
		background-color: #1e1e1e;
		color: #4ec9b0;
		border-bottom-color: #4ec9b0;
	}

	.terminal-body {
		padding: 1.5rem 1.25rem;
		background-color: #1e1e1e;
		min-height: 30px;
	}

	.footer {
		width: 100%;
		max-width: 100%;
		border-top: 1px solid #e2e8f0;
		padding: 1rem 1.5rem;
		background-color: white;
		margin-top: auto;
		box-sizing: border-box;
		overflow: hidden;
	}

	.footer-content {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		align-items: center;
		height: 100%;
		width: 100%;
		max-width: 100%;
		box-sizing: border-box;
	}

	.footer-icons {
		display: flex;
		gap: 1rem;
		align-items: center;
		justify-content: center;
		order: 1;
	}

	.copyright-wrapper {
		font-size: 0.875rem;
		font-family: monospace;
		order: 2;
		text-align: center;
	}

	@media (min-width: 50rem) {
		.header,
		.footer {
			padding: 1rem 2rem;
		}

		.footer-content {
			flex-direction: row;
			justify-content: space-between;
			align-items: center;
		}

		.footer-icons {
			order: 2;
		}

		.copyright-wrapper {
			order: 1;
			text-align: left;
		}
	}
</style>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		const tabs = document.querySelectorAll('.terminal-tab');
		const contents = document.querySelectorAll('.terminal-content');

		tabs.forEach(tab => {
			tab.addEventListener('click', () => {
				const targetTab = tab.getAttribute('data-tab');

				// Remove active class from all tabs
				tabs.forEach(t => t.classList.remove('active'));

				// Hide all content
				contents.forEach(c => {
					if (c instanceof HTMLElement) {
						c.style.display = 'none';
					}
				});

				// Activate clicked tab
				tab.classList.add('active');

				// Show corresponding content
				const targetContent = document.querySelector(`[data-content="${targetTab}"]`);
				if (targetContent && targetContent instanceof HTMLElement) {
					targetContent.style.display = 'flex';
				}
			});
		});

		// Fetch GitHub star count
		const githubLink = document.getElementById('github-link');
		if (githubLink) {
			fetch('https://api.github.com/repos/slatedb/slatedb')
				.then(response => response.json())
				.then(data => {
					if (data.stargazers_count) {
						const stars = data.stargazers_count;
						let formattedStars;
						
						if (stars >= 1000) {
							formattedStars = (stars / 1000).toFixed(1).replace(/\.0$/, '') + 'k';
						} else {
							formattedStars = stars.toString();
						}
						
						githubLink.innerHTML = `github <span class="star-count">[${formattedStars}★]</span>`;
						const starCount = githubLink.querySelector('.star-count');
						if (starCount && starCount instanceof HTMLElement) {
                            // I'll leave this here for now since it took me some time
                            // to figure out how to style the star count, but ultimately
                            // I decided it's better to just keep it the same
							// starCount.style.color = '#AA6C39';
						}
					}
				})
				.catch(error => {
					console.error('Failed to fetch GitHub stars:', error);
				});
		}
	});
</script>

